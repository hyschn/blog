---
title: 学习OpenCV4(二)-数据类型
tags: c++ 图像处理 OpenCV 
key: 20190626
---
可以将OpenCV的数据类型分为三类:
1. 基础数据类型(*basic data type*)   
   从C++基本数据类型(int,float等)组装而成的数据类型,包括简单的向量和矩阵,以及点,矩形,尺寸等集合概念的表示.
2. 帮助类(*helper objects*)   
   这些对象表示更加抽象的概念,如将用于图片切割的表示切割范围的类.
3. 大数组类型(large array types)   
   包含数组和其他基元的集合,或者基本数据类型,典型的如cv::Mat

除了这些类型之外，OpenCV还大量使用了标准模板库(STL)。OpenCV特别依赖于vector类，现在许多OpenCV库函数的参数列表中都有vector模板对象。

## 基础数据类型

最直接的基本数据类型是模板类cv::Vec<>,一个由基元组成的容器类,我们称其为*固定向量类(fixed vector class)*.为什么不直接使用STL类呢,关键的区别在于,固定向量类是针对在编译时维数已知的小向量.这样就可以根据已知的较小的维度数来设计一些高效的代码来处理一些通用的操作.从2.2版本开始,这个小向量的维度被限制为不超过9.后面将要介绍的cv::Mat类,是处理任意维数的大数组的正确方法,但是,固定向量类对于小的东西来说更加方便快捷.

一般通过别名(**typedef**s)的形式来使用cv::Vec<>,例如,cv::Vec2i,cv::Vec3i,cv::Vec4d分别表示两元素整数向量,三元素整数向量,四元素双精度浮点向量.通常,类似cv::Vec{2,3,4,6}{b,w,s,i,f,d}这种形式都可以表示2到4个维度和6种数据类型的任意组合.

出了固定向量类,还有*固定矩阵类(fixed matrix class)*.cv::Matx<>,同样不适用于大数组,而是用来处理特定的小型矩阵操作.计算机视觉中有很多2x2,3x3,4x4的矩阵用于各种变换,cv::Matx<>就是用来存储这些对象的.和cv::Vec<>,一样,cv::Matx<>通过别名cv::Matx{1,2,3,4,6}{1,2,3,4,6}{f,d}来访问,必须在编译时知道固定矩阵类的维度,正式这些特性是的固定矩阵类的操作非常高效,并消除了许多动态内存分配.

cv::Point<>和cv::Vec比较类似,是一个包含包含2或3个基本类型的容器,可以和cv::Vec<>互相转换.区别在于,Point类的成员变量由变量名访问(如mypoint.x,mypointy),而Vec类由索引访问(如myvec[0],myvec[1]).cv::Point<>也是通过别名实例化-cv::Point2f,cv::Point3d等.

cv::Scalar本质上是一个四维点,与一个模板相关联,该模板可以生成任意的四分量向量,但是cv:Scalar特定地别名化为双精度分量的四分量向量,使用整数索引访问cv::Scalar的元素.这是因为cv::Scalar继承自cv::Vec<double,4>

cv::Size用来表示尺寸,成员变量为width和height,有别名cv::Size2i(=cv::Size)和cv::Size2f.

cv::Rect表示矩阵整数形式,包含成员变量x,y(左上角点)和width,height(大小).cv::RotatedRect表示旋转一定角度的矩形,包含一个cv::Point2f(中心),一个cv::Size2f(尺寸),和一个额外的 float(旋转角度).

### Point类
